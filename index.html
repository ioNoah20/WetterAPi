<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wetteranzeige</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
   
</head>
<body>
<div class="background">
    <div class="backgroundh1">
        <h1>Wetteranzeige</h1>
        <br>
        <br>
        <br>
        <input type="text" id="stadtInput" placeholder="Stadt eingeben">
        <button  class="backgroundbutton" id="suchButton">Suchen</button>
    </div>
<div  id="wetterInfo">
        <p>Temperatur: <span id="temperatur"></span></p>
        <p>Wetterzustand: <span id="wetterZustand"></span></p>
        <p>Temp. Min: <span id="tempMin"></span>°C</p>
        <p>Temp. Max: <span id="tempMax"></span>°C</p>
        <p>Gefühlt: <span id="gefuehlt"></span>°C</p>
        <p>Luftdruck: <span id="luftdruck"></span> hPa</p>
        <p>Luftfeuchtigkeit: <span id="luftfeuchtigkeit"></span>%</p>
        <p>Windgeschwindigkeit: <span id="windgeschwindigkeit"></span> m/s</p>
        <p>Land: <span id="land"></span></p>
        <p>Sonnenaufgang: <span id="sonnenaufgang"></span></p>
        <p>Sonnenuntergang: <span id="sonnenuntergang"></span></p>
    
        
    </div>
</div>


    <script>


    document.addEventListener('DOMContentLoaded', () => {
    const suchButton = document.getElementById('suchButton');
    const stadtInput = document.getElementById('stadtInput');
    const temperaturElement = document.getElementById('temperatur');
    const wetterZustandElement = document.getElementById('wetterZustand');
    const tempMinElement = document.getElementById('tempMin');
    const tempMaxElement = document.getElementById('tempMax');
    const gefuehltElement = document.getElementById('gefuehlt');
    const luftdruckElement = document.getElementById('luftdruck');
    const luftfeuchtigkeitElement = document.getElementById('luftfeuchtigkeit');
    const windgeschwindigkeitElement = document.getElementById('windgeschwindigkeit');
    const landElement = document.getElementById('land');
    const sonnenaufgangElement = document.getElementById('sonnenaufgang');
    const sonnenuntergangElement = document.getElementById('sonnenuntergang');
    const apiKey = 'fc113072f4c388f84c0a44f92c803686';
  

    if (suchButton) {
            suchButton.addEventListener('click', () => {
                const stadt = stadtInput.value.trim();

                if (stadt) {
                    // Stadt wird durch die Eingabe genutzt 
                    fetch(`https://api.openweathermap.org/geo/1.0/direct?q=${stadt}&limit=5&appid=${apiKey}`)
                        .then((response) => response.json())
                        .then((data) => {
                            if (data.length > 0) {
                                const latitude = data[0].lat;
                                const longitude = data[0].lon;
                                

                                // Wetterdaten von OpenWeatherMap basierend auf den Koordinaten der Stadt 
                                fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${latitude}&lon=${longitude}&appid=${apiKey}`)
                                    .then((response) => response.json())
                                    .then((wetterData) => {
                                        if (wetterData.cod === 200) {
                                            // Wetterdaten anzeigen
                                            temperaturElement.textContent = (wetterData.main.temp - 273.15).toFixed(2) +'C°'; 
                                            wetterZustandElement.textContent = wetterData.weather[0].description;
                                            tempMinElement.textContent = (wetterData.main.temp_min - 273.15).toFixed(2) ;
                                            tempMaxElement.textContent = (wetterData.main.temp_max - 273.15).toFixed(2) ;
                                            gefuehltElement.textContent = (wetterData.main.feels_like - 273.15).toFixed(2) ;
                                            luftdruckElement.textContent = wetterData.main.pressure ;
                                            luftfeuchtigkeitElement.textContent = wetterData.main.humidity;
                                            windgeschwindigkeitElement.textContent = wetterData.wind.speed ;
                                            landElement.textContent = wetterData.sys.country;
                                            sonnenaufgangElement.textContent = new Date(wetterData.sys.sunrise * 1000).toLocaleTimeString();
                                            sonnenuntergangElement.textContent = new Date(wetterData.sys.sunset * 1000).toLocaleTimeString();
                                        } 
                                    }) 
                            } else {
                                // Fehlermeldung anzeigen, wenn die Stadt nicht gefunden wird
                                temperaturElement.textContent = 'Gibt es nicht';
                                wetterZustandElement.textContent = 'vllt vertippt :)?';
                              
                        }
                 })
            }
        });
    }
});


</script>

</body>
</html>
